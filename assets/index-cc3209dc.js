import{r as u,j as t,R as D}from"./react-bc4db9fe.js";import{c as B}from"./react-dom-9af8c8e6.js";import{P as m}from"./prop-types-2b84e597.js";import"./scheduler-765c72db.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function b({text:e="Loading",speed:s=300}){const[n,o]=u.useState(e);return u.useEffect(()=>{const r=setInterval(()=>{o(a=>a===e+"..."?e:a+=".")},s);return()=>{clearInterval(r)}},[e,s]),t.jsx("p",{className:"content",children:n})}b.propTypes={text:m.string.isRequired,speed:m.number.isRequired};const T="/Github-viewer/assets/git_cat-f9449b5d.png";function U({repos:e,index:s}){var a;const[n,o]=u.useState("hide-list"),r=s*100;return u.useEffect(()=>{setTimeout(()=>{o("show-list")},r)},[r]),t.jsxs("div",{className:"RepoList "+n,children:[t.jsxs("h2",{className:"ReposRanking",children:[s+1,"위"]}),t.jsx("hr",{}),t.jsx("img",{src:(a=e==null?void 0:e.owner)==null?void 0:a.avatar_url,alt:"사용자 이미지",className:"profile-image"}),t.jsx("p",{className:"ReposName",children:e==null?void 0:e.name}),t.jsx("hr",{}),t.jsx("p",{className:"User-name",children:e==null?void 0:e.owner.login}),t.jsx("hr",{}),t.jsxs("a",{href:e==null?void 0:e.html_url,target:"blank",children:["저장소로",t.jsx("br",{}),"이동"]}),t.jsx("hr",{}),t.jsxs("p",{children:["팔로워:",t.jsx("br",{}),e==null?void 0:e.stargazers_count,"명"]}),t.jsx("hr",{}),t.jsxs("p",{children:["포크:",t.jsx("br",{}),e==null?void 0:e.forks_count,"회"]})]})}function A({reposData:e,isLoading:s}){return s?t.jsx(b,{text:"Loading",speed:300}):t.jsxs("div",{children:[t.jsx("h1",{className:"center-text",children:"인기 저장소 랭킹!"}),e.length===0&&t.jsx("img",{className:"Popular-backImg",alt:"인기 저장소 대기화면",src:T}),t.jsx("div",{children:e==null?void 0:e.map((n,o)=>t.jsx(U,{index:o,repos:n},o))})]})}function j({isWinner:e,subheader:s,avatar:n,href:o,name:r,children:a}){const c=e?"card winner":"card loser";return t.jsxs("div",{className:c,children:[t.jsxs("h2",{className:"header-sm center-text",children:[e?"Winner ":"Loser ",t.jsx("a",{className:"link",href:o,children:r})]}),s&&t.jsxs("h4",{className:"Score-text",children:[s,"점"]}),t.jsx("img",{className:"avatar",src:n,alt:`Avatar for ${r}`}),a]})}j.propTypes={subheader:m.number,avatar:m.string.isRequired,href:m.string.isRequired,name:m.string.isRequired};const y="/Github-viewer/assets/backImg-7cf30a96.jpeg";function N({name:e,location:s,public_repos:n,followers:o,following:r}){return t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"Children-name",children:["- ",e]}),t.jsx("p",{className:"Children-location",children:s}),t.jsxs("p",{className:"Children-option",children:["Repos/ ",n," 팔로워/",o," 팔로잉/ ",r]})]})}function G({playersData:e,isLoading:s}){if(s)return t.jsx(b,{text:"Loading",speed:300});if(e.length>0){const[n,o]=e,{profile:{avatar_url:r,login:a,repos_url:c,name:f,location:h,public_repos:g,followers:i,following:l},score:d}=n,{profile:{avatar_url:L,login:_,repos_url:R,name:C,location:k,public_repos:E,followers:P,following:$},score:p}=o;return t.jsxs(t.Fragment,{children:[t.jsx("h1",{className:"center-text",children:"This is Battle!"}),t.jsxs("div",{className:"Battle-board",children:[t.jsx(j,{avatar:r,name:a,href:c,subheader:d,isWinner:d>p,children:t.jsx(N,{name:f,location:h,public_repos:g,followers:i,following:l})}),t.jsx("p",{children:"VS"}),t.jsx(j,{avatar:L,name:_,href:R,subheader:p,isWinner:p>d,children:t.jsx(N,{name:C,location:k,public_repos:E,followers:P,following:$})})]})]})}return t.jsxs(t.Fragment,{children:[t.jsx("h1",{className:"center-text",children:"아이디를 입력해주세요!"}),t.jsxs("div",{className:"Battle-board",children:[t.jsx("img",{className:"backImg",src:y,alt:"battle 대기화면"}),t.jsx("p",{children:"vs"}),t.jsx("img",{className:"backImg",src:y,alt:"battle 대기화면"})]})]})}function v({text:e,isActive:s,onClick:n}){return t.jsx("button",{className:`nav-button ${s?"active":""}`,onClick:o=>{o.preventDefault(),n()},children:e})}const x=[{en:"All",ko:"전체"},{en:"JavaScript",ko:"자바스크립트"},{en:"Ruby",ko:"루비"},{en:"Java",ko:"자바"},{en:"Kotlin",ko:"코틀린"},{en:"Go",ko:"고"},{en:"CSS",ko:"CSS"},{en:"Python",ko:"파이썬"}];function q({onSubmit:e}){const s=x[0],[n,o]=u.useState("ko"),[r,a]=u.useState(s.en);function c(){o(n==="ko"?"en":"ko")}function f(i){a(i.target.value)}function h(i){return x.find(d=>d.en===i||d.ko===i).en}function g(i){i.preventDefault();const l=h(r);e(l)}return t.jsxs("form",{className:"Language-select-box",onSubmit:g,children:[t.jsx("select",{value:r,onChange:f,children:x.map((i,l)=>t.jsx("option",{children:i[n]},l))}),t.jsx("button",{className:"Language-button",type:"button",onClick:c,children:"KO/EN"}),t.jsx("button",{className:"Language-button",children:"제출"})]})}function I({name:e,userData:s,onUserIdChange:n}){return t.jsx("input",{placeholder:"아이디를 입력하세요!",name:e,value:s[e],onChange:n})}function O({onSubmit:e}){const[s,n]=u.useState({user1:"",user2:""});function o(a){if(a.preventDefault(),s.user1.trim().length===0&&s.user2.trim().length===0){alert("유효한 아이디가 아닙니다!!!!!!!!!");return}e(Object.values(s))}function r(a){const{name:c,value:f}=a.target;n(h=>({...h,[c]:f}))}return t.jsxs("form",{className:"user-ID-Inputboxes",onSubmit:o,children:[t.jsxs("div",{className:"Input-boxes",children:[t.jsx(I,{userData:s,name:"user1",onUserIdChange:r}),t.jsx(I,{userData:s,name:"user2",onUserIdChange:r})]}),t.jsx("button",{className:"ID-Submit-button",children:"제출"})]})}const F="GITHUB_CLIENT_ID",H="GITHUB_SECRET_ID",w=`?client_id=${F}&client_secret=${H}`;function K(e,s){return e==="Not Found"?`"${s}"는 존재하지 않는 사용자입니다`:e}async function M(e){try{const s=await fetch(`https://api.github.com/users/${e}${w}`);if(s.status===404)throw new Error("Not Found");return await s.json()}catch(s){alert(K(s.message,e))}}async function J(e){try{return await(await fetch(`https://api.github.com/users/${e}/repos${w}&per_page=100`)).json()}catch{alert("데이터 요청에 실패하였습니다.")}}function V(e){return e.reduce((s,{stargazers_count:n})=>s+n,0)}function W(e,s){return e*3+V(s)}async function S(e){let s,n;try{if(s=await M(e),n=await J(e),!s.followers||typeof s.followers>"u"||!n)throw new Error}catch{alert("API요청이 초과하였으므로, 다음에 시도해주세요.")}return{profile:s,score:W(s.followers,n)}}async function z([e,s]){const n=await S(e),o=await S(s);return[n,o]}async function Y(e){let s;try{const n=window.encodeURI(`https://api.github.com/search/repositories${w}&q=stars:>1+language:${e}&sort=stars&order=desc&type=Repositories`),o=await fetch(n);if(!o.ok)throw new Error;s=(await o.json()).items}catch{alert("데이터 요청에 실패하였습니다.")}return s}function Q(){const[e,s]=u.useState(!1),[n,o]=u.useState([]),[r,a]=u.useState(!1),[c,f]=u.useState([]);async function h(l){a(!0);const d=await Y(l);o(d),a(!1)}async function g(l){a(!0);const d=await z(l);f(d),a(!1)}console.log(c);function i(l){s(l)}return t.jsxs("div",{className:"container",children:[t.jsxs("div",{className:"flex space-between",children:[t.jsx(v,{isActive:!e,text:"인기 저장소",onClick:()=>i(!1)}),!e&&t.jsx(q,{onSubmit:h}),e&&t.jsx(O,{onSubmit:g}),t.jsx(v,{isActive:e,text:"Github 대결",onClick:()=>i(!0)})]}),!e&&t.jsx(A,{reposData:n,isLoading:r}),e&&t.jsx(G,{playersData:c,isLoading:r})]})}B.createRoot(document.getElementById("root")).render(t.jsx(D.StrictMode,{children:t.jsx(Q,{})}));
